<!-- Particules d'arrière-plan -->
<div class="bg-particles">
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
</div>

<div class="login-container">
  <div class="login-card">
    <!-- Partie gauche - message d'accueil -->
    <div class="login-left">
      <div class="welcome-content">
        <h1 class="welcome-title">Bienvenue dans votre application <br><strong>EnergyTracker</strong></h1>
        <p class="welcome-subtitle">Connectez-vous pour continuer</p>
      </div>

      <!-- Icône Energy -->
      <svg class="energy-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
      </svg>
    </div>

    <!-- Partie droite - formulaire -->
    <div class="login-right">
      <h2 class="form-title">Connexion</h2>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">

        <!-- Champ Email -->
        <div class="input-group">
          <div class="input-wrapper">
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="Saisir votre email"
              required
              [class.error]="email?.invalid && email?.touched"
            />
            <svg class="input-icon" viewBox="0 0 24 24">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </div>
          <!-- Message d'erreur pour email -->
          <div class="error-message" *ngIf="email?.invalid && email?.touched">
            <svg class="error-icon" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <span *ngIf="email?.errors?.['required']">L'email est requis</span>
            <span *ngIf="email?.errors?.['email']">Format d'email invalide</span>
          </div>
        </div>

        <!-- Champ Mot de passe -->
        <div class="input-group">
          <div class="input-wrapper">
            <input
              type="password"
              id="password"
              formControlName="password"
              placeholder="Entrer votre mot de passe"
              required
              [class.error]="password?.invalid && password?.touched"
            />
            <svg class="input-icon" viewBox="0 0 24 24">
              <path d="M12 17a2 2 0 0 0 2-2v-3a2 2 0 0 0-4 0v3a2 2 0 0 0 2 2zm6-6h-1V9a5 5 0 0 0-10 0v2H6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z"/>
            </svg>
          </div>
          <!-- Message d'erreur pour mot de passe -->
          <div class="error-message" *ngIf="password?.invalid && password?.touched">
            <svg class="error-icon" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <span *ngIf="password?.errors?.['required']">Le mot de passe est requis</span>
            <span *ngIf="password?.errors?.['minlength']">Le mot de passe doit contenir au moins 6 caractères</span>
          </div>
        </div>

        <!-- Message d'erreur général -->
        <div class="general-error-message" *ngIf="errorMessage">
          <svg class="error-icon" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM13 17h-2v-6h2v6zm0-8h-2V7h2v2z"/>
          </svg>
          <span>{{ errorMessage }}</span>
        </div>

        <!-- Bouton de connexion avec spinner -->
        <button type="submit" class="submit-btn" [disabled]="loginForm.invalid || isLoading">
          <div class="btn-content">
            <!-- Spinner -->
            <div class="spinner" *ngIf="isLoading">
              <svg class="spinner-icon" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.3"/>
                <path d="M12 2a10 10 0 0 1 10 10" stroke="currentColor" stroke-width="4" fill="none" stroke-linecap="round"/>
              </svg>
            </div>
            <!-- Texte du bouton -->
            <span class="btn-text" [class.loading]="isLoading">
              {{ isLoading ? 'Connexion en cours...' : 'Se connecter' }}
            </span>
          </div>
        </button>
      </form>
    </div>
  </div>
</div>
