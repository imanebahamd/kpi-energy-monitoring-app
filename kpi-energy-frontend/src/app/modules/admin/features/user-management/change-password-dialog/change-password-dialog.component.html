<!-- change-password-dialog.component.html -->
<div class="change-password-dialog">
  <h2 mat-dialog-title>Changer le mot de passe</h2>

  <mat-dialog-content>
    <form (ngSubmit)="submit()" #passwordForm="ngForm">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Mot de passe actuel</mat-label>
        <input matInput type="password" [(ngModel)]="data.currentPassword" name="currentPassword" required>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nouveau mot de passe</mat-label>
        <input matInput type="password" [(ngModel)]="data.newPassword" name="newPassword" required minlength="6">
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Confirmer le mot de passe</mat-label>
        <input matInput type="password" [(ngModel)]="data.confirmPassword" name="confirmPassword" required>
      </mat-form-field>

      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="success-message">
        {{ successMessage }}
      </div>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="close()">Annuler</button>
    <button mat-raised-button color="primary"
            (click)="submit()"
            [disabled]="!passwordForm.form.valid || isLoading">
      <span *ngIf="!isLoading">Valider</span>
      <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
    </button>
  </mat-dialog-actions>
</div>
