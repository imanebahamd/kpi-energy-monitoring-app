<!-- change-password-dialog.component.html -->
<div class="change-password-dialog">
  <div class="dialog-header">
    <div class="header-icon">
      <i class="bi bi-key"></i>
    </div>
    <h2 class="dialog-title">Changer le mot de passe</h2>
    <p class="dialog-subtitle">Mettez à jour votre mot de passe pour sécuriser votre compte</p>
  </div>

  <div class="dialog-content">
    <form (ngSubmit)="submit()" #passwordForm="ngForm" class="password-form">
      <div class="form-group">
        <label class="form-label">
          <i class="bi bi-lock"></i>
          Mot de passe actuel
        </label>
        <input
          type="password"
          class="form-control"
          [(ngModel)]="data.currentPassword"
          name="currentPassword"
          required
          placeholder="Entrez votre mot de passe actuel">
      </div>

      <div class="form-group">
        <label class="form-label">
          <i class="bi bi-key"></i>
          Nouveau mot de passe
        </label>
        <input
          type="password"
          class="form-control"
          [(ngModel)]="data.newPassword"
          name="newPassword"
          required
          minlength="6"
          placeholder="Choisissez un nouveau mot de passe">
        <div class="password-hint">Minimum 6 caractères</div>
      </div>

      <div class="form-group">
        <label class="form-label">
          <i class="bi bi-key-fill"></i>
          Confirmer le mot de passe
        </label>
        <input
          type="password"
          class="form-control"
          [(ngModel)]="data.confirmPassword"
          name="confirmPassword"
          required
          placeholder="Confirmez votre nouveau mot de passe">
      </div>

      <div *ngIf="errorMessage" class="alert alert-error">
        <i class="bi bi-exclamation-circle"></i>
        <span>{{ errorMessage }}</span>
      </div>

      <div *ngIf="successMessage" class="alert alert-success">
        <i class="bi bi-check-circle"></i>
        <span>{{ successMessage }}</span>
      </div>
    </form>
  </div>

  <div class="dialog-actions">
    <button class="btn btn-cancel" (click)="close()">
      <i class="bi bi-x"></i>
      Annuler
    </button>
    <button class="btn btn-primary"
            (click)="submit()"
            [disabled]="!passwordForm.form.valid || isLoading">
      <i class="bi bi-check" *ngIf="!isLoading"></i>
      <span *ngIf="!isLoading">Mettre à jour</span>
      <div class="spinner" *ngIf="isLoading"></div>
    </button>
  </div>
</div>
