<div class="water-annual-container">
  <!-- Alerte dynamique -->
  <div *ngIf="showAlert" class="dynamic-alert" [ngClass]="alertType">
    <div class="alert-content">
      <i class="alert-icon" [ngClass]="alertType"></i>
      <span>{{ alertMessage }}</span>
    </div>
  </div>

  <header class="water-header">
    <div class="header-content">
      <h1 class="water-title">Tableau Annuel de Production d'Eau</h1>
      <p class="water-subtitle">Surveillance et analyse des donn√©es de production d'eau annuelles</p>
    </div>

  </header>

  <div class="filters-card">
    <div class="date-selector">
      <div class="date-header">
        <div class="icon">üìÖ</div>
        <h4>S√©lection de l'ann√©e</h4>
      </div>

      <div class="filters-content">
        <div class="filter-row">
          <div class="form-group">
            <label class="form-label">Ann√©e</label>
            <input id="year" type="number" class="form-control" [(ngModel)]="selectedYear"
                   (change)="loadData()"
                   min="2000" max="2100"
                   placeholder="Entrez l'ann√©e"
                   [disabled]="isLoading">
          </div>

          <div class="form-group submit-button-group">
            <label class="form-label" style="visibility: hidden;">Submit</label>
            <button (click)="loadData()"
                    [disabled]="!selectedYear || isLoading"
                    class="action-button primary">
              <span *ngIf="!isLoading">Afficher les donn√©es</span>
              <span *ngIf="isLoading" class="spinner"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="status-card loading">
    <div class="spinner"></div>
    <span>Chargement en cours...</span>
  </div>

  <div *ngIf="noDataAvailable && !isLoading" class="status-card no-data">
    <i class="icon info"></i>
    <span>Aucune donn√©e disponible pour l'ann√©e {{selectedYear}}</span>
  </div>

  <!-- Section de donn√©es -->
  <div *ngIf="monthlyData.length > 0 && !isLoading" class="data-section">
    <div class="section-header">
      <h2><i class="icon calendar"></i> Donn√©es pour l'ann√©e {{selectedYear}}</h2>
    </div>

    <div class="table-responsive">
      <table class="data-table">
        <thead>
        <tr>
          <th>Mois</th>
          <th>F3BIS (m¬≥)</th>
          <th>F3 (m¬≥)</th>
          <th>SE2 (m¬≥)</th>
          <th>SE3BIS (m¬≥)</th>
          <th>Total Production (m¬≥)</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of monthlyData">
          <td><strong>{{ getMonthName(item.month) }}</strong></td>
          <td class="numeric">{{ item.f3bis | number:'1.2-2' }}</td>
          <td class="numeric">{{ item.f3 | number:'1.2-2' }}</td>
          <td class="numeric">{{ item.se2 | number:'1.2-2' }}</td>
          <td class="numeric">{{ item.se3bis | number:'1.2-2' }}</td>
          <td class="numeric">{{ item.totalProduction | number:'1.2-2' }}</td>
        </tr>
        </tbody>
        <tfoot>
        <tr class="total-row">
          <td><strong>Total Ann√©e</strong></td>
          <td class="numeric">{{ calculateYearlyTotal().f3bis | number:'1.2-2' }}</td>
          <td class="numeric">{{ calculateYearlyTotal().f3 | number:'1.2-2' }}</td>
          <td class="numeric">{{ calculateYearlyTotal().se2 | number:'1.2-2' }}</td>
          <td class="numeric">{{ calculateYearlyTotal().se3bis | number:'1.2-2' }}</td>
          <td class="numeric">{{ calculateYearlyTotal().totalProduction | number:'1.2-2' }}</td>
        </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <!-- Navigation section -->
  <div class="navigation-section">
    <div class="navigation-header">
      <h3>Navigation Rapide</h3>
      <p>Acc√©dez aux autres sections du module eau</p>
    </div>

    <div class="navigation-grid">
      <a routerLink="/water-monthly" class="navigation-card">
        <div class="nav-icon">
          <i class="icon calendar-month"></i>
        </div>
        <div class="nav-content">
          <h4>Tableau Mensuel</h4>
          <p>Consulter les donn√©es mensuelles de production d'eau</p>
        </div>
      </a>

      <a routerLink="/water-graphs" class="navigation-card">
        <div class="nav-icon">
          <i class="icon chart"></i>
        </div>
        <div class="nav-content">
          <h4>Visualisations</h4>
          <p>Analyser les graphiques de production d'eau</p>
        </div>
      </a>
    </div>
  </div>
</div>
