<div class="electricity-graphs-container">
  <div class="electricity-graphs-content">
    <!-- Alerte dynamique -->
    <div *ngIf="showAlert" class="alert-container" [attr.data-type]="alertType">
      <div class="alert-content">
        {{ alertMessage }}
      </div>
    </div>

    <!-- En-tête -->
    <header class="graphs-header">
      <h1 class="header-title">Visualisation de la Consomation </h1>

      <div class="header-actions">
        <a [routerLink]="[getRoutePrefix(), 'electricity-saisie']" class="btn btn-primary">
          <i class="icon add"></i> Saisir Nouvelles Données
        </a>
        <a [routerLink]="[getRoutePrefix(), 'electricity-monthly']" class="btn btn-secondary">
          <i class="icon calendar-month"></i> Tableau Mensuel
        </a>
        <a [routerLink]="[getRoutePrefix(), 'electricity-annual']" class="btn btn-info">
          <i class="icon calendar"></i> Tableau Annuel
        </a>
      </div>
    </header>

    <!-- Message d'information -->
    <div class="info-message">
      <i class="icon info"></i>
      <p>Cette interface vous permet de visualiser les données électriques sous forme graphique. Sélectionnez une année et le type de données à afficher.</p>
    </div>

    <!-- Contrôles -->
    <div class="controls">
      <div class="control-group">
        <label>Année:
          <input type="number" [(ngModel)]="year" (change)="loadData()" min="2000" max="2100">
        </label>
      </div>

      <div class="control-group">
        <label>Type de graphique:
          <select [(ngModel)]="chartType" (change)="changeChartType(chartType)">
            <option value="line">Courbe</option>
            <option value="bar">Barres</option>
          </select>
        </label>
      </div>

      <div class="control-group">
        <label>Données à afficher:
          <select [(ngModel)]="graphType" (change)="changeGraphType(graphType)">
            <option value="consumption">Consommation (kWh)</option>
            <option value="powerFactor">Facteur de puissance</option>
          </select>
        </label>
      </div>
    </div>

    <!-- Messages d'état -->
    <div *ngIf="isLoading" class="status-message loading">
      <span class="spinner"></span> Chargement en cours...
    </div>

    <div *ngIf="error" class="status-message error">
      {{ error }}
    </div>

    <div *ngIf="noDataAvailable && !error && !isLoading" class="status-message no-data">
      <i class="icon info"></i>
      <span>Aucune donnée disponible pour l'année {{ year }}</span>
    </div>

    <!-- Graphique -->
    <div class="chart-wrapper" *ngIf="!isLoading && !noDataAvailable">
      <div class="chart-container">
        <canvas baseChart
                [type]="chartType"
                [data]="currentChartData"
                [options]="currentChartOptions">
        </canvas>
      </div>
    </div>
  </div>
</div>
