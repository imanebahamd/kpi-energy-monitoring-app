<div class="electricity-graphs-container">
  <!-- Alerte dynamique -->
  <div *ngIf="showAlert" class="dynamic-alert" [ngClass]="alertType">
    <div class="alert-content">
      <i class="alert-icon" [ngClass]="alertType"></i>
      <span>{{ alertMessage }}</span>
    </div>
  </div>

  <!-- En-t√™te -->
  <header class="electricity-header">
    <div class="header-content">
      <h1 class="electricity-title">Visualisation Graphique √âlectrique</h1>
      <p class="electricity-subtitle">Analyse visuelle des donn√©es √©nerg√©tiques</p>
    </div>
    <div class="header-actions">
      <a [routerLink]="[getRoutePrefix(), 'electricity-saisie']" class="action-button primary">
        <i class="icon add"></i> Saisir Nouvelles Donn√©es
      </a>

    </div>
  </header>

  <!-- Contr√¥les -->
  <div class="filters-card">
    <div class="date-selector">
      <div class="date-header">
        <div class="icon">üìä</div>
        <h4>Param√®tres de visualisation</h4>
      </div>

      <div class="filters-content">
        <div class="filter-row">
          <div class="form-group">
            <label class="form-label">Ann√©e</label>
            <input type="number" class="form-control" [(ngModel)]="year"
                   (change)="loadData()" min="2000" max="2100"
                   placeholder="Entrez l'ann√©e" [disabled]="isLoading">
          </div>

          <div class="form-group">
            <label class="form-label">Type de graphique</label>
            <select class="form-select" [(ngModel)]="chartType" (change)="changeChartType(chartType)" [disabled]="isLoading">
              <option value="line">Courbe</option>
              <option value="bar">Barres</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Donn√©es √† afficher</label>
            <select class="form-select" [(ngModel)]="graphType" (change)="changeGraphType(graphType)" [disabled]="isLoading">
              <option value="consumption">Consommation (kWh)</option>
              <option value="powerFactor">Facteur de puissance</option>
            </select>
          </div>

          <div class="form-group submit-button-group">
            <label class="form-label" style="visibility: hidden;">Submit</label>
            <button (click)="loadData()"
                    [disabled]="!year || isLoading"
                    class="action-button primary">
              <span *ngIf="!isLoading">Afficher les donn√©es</span>
              <span *ngIf="isLoading" class="spinner"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Messages d'√©tat -->
  <div *ngIf="isLoading" class="status-card loading">
    <div class="spinner"></div>
    <span>Chargement en cours...</span>
  </div>

  <div *ngIf="error" class="status-card error">
    <i class="icon warning"></i>
    <span>{{ error }}</span>
  </div>

  <div *ngIf="noDataAvailable && !error && !isLoading" class="status-card no-data">
    <i class="icon info"></i>
    <span>Aucune donn√©e disponible pour l'ann√©e {{ year }}</span>
  </div>

  <!-- Graphique -->
  <div class="chart-wrapper" *ngIf="!isLoading && !noDataAvailable">
    <div class="chart-container">
      <canvas baseChart
              [type]="chartType"
              [data]="currentChartData"
              [options]="currentChartOptions">
      </canvas>
    </div>
  </div>

  <!-- Navigation section -->
  <div class="navigation-section">
    <div class="navigation-header">
      <h3>Navigation Rapide</h3>
      <p>Acc√©dez aux autres sections du module √©nergie</p>
    </div>

    <div class="navigation-grid">
      <a [routerLink]="[getRoutePrefix(), 'electricity-monthly']" class="navigation-card">
        <div class="nav-icon">
          <i class="icon calendar-month"></i>
        </div>
        <div class="nav-content">
          <h4>Tableau Mensuel</h4>
          <p>Consulter les donn√©es mensuelles d'√©nergie</p>
        </div>
      </a>

      <a [routerLink]="[getRoutePrefix(), 'electricity-annual']" class="navigation-card">
        <div class="nav-icon">
          <i class="icon calendar"></i>
        </div>
        <div class="nav-content">
          <h4>Tableau Annuel</h4>
          <p>Analyser les donn√©es annuelles consolid√©es</p>
        </div>
      </a>
    </div>
  </div>
</div>
